
start:
  menu: 1


menus:
  - id: 1
    text: "Have you slayed the terror of the crypt?"
    options:
      - id: 1
        text: "%index%"
        checkpoint: 1


checkpoints:
  - id: 1
    type: Call
    value: >               
            var q = user.GetQuest("Terror1");                             

            if (q != null) {

              q.HandleQuest(client);
              result = q.QuestCompleted;
            }

    success:

    fail:
      step: 1
      sequence: 2 


#check what the most recent "terror quest they are on"
checkpoints:
  - id: 1
    type: Call
    value: >  
            var keys = new Dictionary<string, string>();
            var result = false;  

            var q = user.Quests.FindLast(i => !i.Completed && i.Name.ToLower().StartsWith("terror"));

            if (q != null) {
               result = true;
            }

    success:
      checkpoint: 2
    fail:
      checkpoint: 2

  - id: 2
    type: Call
    value: >  
           var result = true;
           keys["Terror1"] = result;



